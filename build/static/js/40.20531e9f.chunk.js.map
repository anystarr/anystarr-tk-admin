{"version":3,"sources":["views/TaskModule/TaskModule.jsx","views/TaskModule/index.js","../node_modules/antd/lib/switch/style/index.js","../node_modules/antd/lib/switch/index.js","../node_modules/rc-switch/es/index.js"],"names":["Option","MonthPicker","RangePicker","columns","label","value","map","option","index","key","edit","changeShow","confirm","changeModuleStatus","title","dataIndex","width","align","render","text","item","defaultChecked","onClick","style","HeaderC","name","display","DetailModal","visible","onCreate","onCancel","formData","disabled","useForm","form","useState","useEffect","console","log","Object","keys","length","setFieldsValue","resetFields","okText","cancelText","onOk","validateFields","then","values","catch","info","labelCol","span","wrapperCol","Item","rules","required","allowClear","SearchTableView","props","list","pagination","current","pageSize","search","loading","state","setState","data","params","start_row","page_size","getList","APIGetTaskModuleList","resp","records","getKeyList","total","err","className","APICreateTaskModule","success","WebBreadcrumb","arr","src","Aset","alt","textAlign","marginBottom","marginRight","type","refreshList","status","APIDisableModule","id","APIEnableModule","rowKey","record","dataSource","onChange","bordered","scroll","scrollToFirstRowOnChange","x","TaskModule","require","_interopRequireWildcard","_interopRequireDefault","defineProperty","exports","_extends2","_defineProperty2","React","_rcSwitch","_classnames","_LoadingOutlined","_wave","_configProvider","_SizeContext","_devWarning","__rest","s","e","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","Switch","forwardRef","_a","ref","_classNames","customizePrefixCls","prefixCls","customizeSize","size","_a$className","_React$useContext","useContext","ConfigContext","getPrefixCls","direction","loadingIcon","createElement","concat","classes","insertExtraNode","__ANT_SWITCH","displayName","_default","_ref","_ref$prefixCls","checked","checkedChildren","unCheckedChildren","onKeyDown","restProps","_objectWithoutProperties","_useMergedState","useMergedState","defaultValue","_useMergedState2","_slicedToArray","innerChecked","setInnerChecked","triggerChange","newChecked","event","mergedChecked","switchClassName","classNames","_defineProperty","assign","role","which","KeyCode","LEFT","RIGHT","ret"],"mappings":"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","file":"static/js/40.20531e9f.chunk.js","sourcesContent":["import React, { Component, useEffect, useState } from 'react'\nimport WebBreadcrumb from '@/components/WebBreadcrumb'\nimport {\n    Layout,\n    Row,\n    Col,\n    Tag,\n    Table,\n    Button,\n    Modal,\n    Input,\n    Popconfirm,\n    Form,\n    DatePicker,\n    Select,\n    message,\n    Switch\n} from 'antd'\nimport '@/style/view-style/table.less'\nimport {\n    APIgetList,\n    APIrewardApplicationList,\n    APIrewardApplicationHandle,\n    APIexportRewardRecord,\n    APIGetUserList,\n    APIGetInvitecodeList,\n    APICreateInvitecode,\n    APIGetCampaignsList,\n    APIFindTasks,\n    APIGetSkuList,\n    APICreateOrModifySku,\n    APIDeleteSku,\n    APIGetTaskModuleList,\n    APICreateTaskModule,\n    APIEnableModule,\n    APIDisableModule\n} from '@/mapi'\nimport { getKeyList } from '@/tools/action.js'\nimport { getLendTime, getLendTimeNew } from '@/tools/help.js'\nimport { render } from 'react-dom'\nimport { search } from '../../tools/host'\nimport Aset from '@/imgs/aset1.png'\nimport { FormOutlined, DeleteOutlined } from '@ant-design/icons'\nimport HeaderC from '@/components/HeaderC'\n\nconst { MonthPicker, RangePicker } = DatePicker\nconst { Option } = Select\n\nconst typeList = [\n    { label: '待处理', value: 'to_handle' },\n    { label: '已处理', value: 'handled' }\n]\n\nconst TypeOptions = typeList.map((option, index) => {\n    return (\n        <Option key={index} value={option.value}>\n            {option.label}\n        </Option>\n    )\n})\n\nconst getLocalTime = nS => {\n    return new Date(parseInt(nS) * 1000).toLocaleString().replace(/:\\d{1,2}$/, ' ')\n}\n\nconst columns = (edit, changeShow, confirm, changeModuleStatus) => [\n    {\n        title: 'Effective',\n        dataIndex: 'status',\n        key: 'status',\n        width: '100',\n        align: 'center',\n        render: (text, item) => (\n            <div>\n                <Switch\n                    defaultChecked={text == 1 ? true : false}\n                    onClick={() => {\n                        changeModuleStatus(item)\n                    }}\n                />{' '}\n            </div>\n        )\n    },\n    {\n        title: 'Module name',\n        dataIndex: 'module_name',\n        key: 'module_name',\n        align: 'center'\n    },\n    {\n        title: 'Type',\n        dataIndex: 'type',\n        key: 'type',\n        width: '100',\n        align: 'center',\n        render: (text, item) => {\n            if (text == 1) {\n                return <span>promo code</span>\n            } else if (text == 2) {\n                return <span>content</span>\n            } else if (text == 3) {\n                return <span>proof</span>\n            } else {\n                return <span></span>\n            }\n        }\n    },\n    {\n        title: 'Update date',\n        dataIndex: 'update_time',\n        key: 'update_time',\n        width: '100',\n        align: 'center'\n    },\n    {\n        title: 'Update by',\n        dataIndex: 'updated_by',\n        key: 'updated_by',\n        align: 'center',\n        render: (text, item) => (\n            <div style={{ width: '100px' }}>\n                <HeaderC name={text} style={{ display: 'inline-block' }} />\n                <span>{text}</span>\n            </div>\n        )\n    }\n]\n\nconst searchLayout = {\n    labelCol: {\n        span: 8\n    },\n    wrapperCol: {\n        span: 16\n    }\n}\n\nconst SearchBar = props => {\n    const [form] = Form.useForm()\n\n    const onFinish = values => {\n        console.log('values', values)\n        props.changeSearch(values)\n    }\n\n    return (\n        <Form\n            {...searchLayout}\n            form={form}\n            name='advanced_search'\n            className='ant-advanced-search-form'\n            onFinish={onFinish}>\n            <Row gutter={24}>\n                <Col span={8}>\n                    <Form.Item name='id' label='ID'>\n                        <Input />\n                    </Form.Item>\n                </Col>\n                <Col span={8}>\n                    <Form.Item name='is_show_app' label='Show App'>\n                        <Select allowClear>\n                            <Option value={1}>Yes</Option>\n                            <Option value={0}>No</Option>\n                        </Select>\n                    </Form.Item>\n                </Col>\n            </Row>\n\n            <Row>\n                <Col span={24} style={{ textAlign: 'right' }}>\n                    <Button type='primary' htmlType='submit' loading={props.loading}>\n                        Search\n                    </Button>\n                    <Button\n                        style={{ margin: '0 8px' }}\n                        onClick={() => {\n                            form.resetFields()\n                        }}>\n                        Reset\n                    </Button>\n                </Col>\n            </Row>\n        </Form>\n    )\n}\n\nconst DetailModal = ({ visible, onCreate, onCancel, formData, disabled }) => {\n    const [form] = Form.useForm()\n\n    const [user, setUser] = useState({})\n    const [allMemVisible, setAllMemVisible] = useState(false)\n\n    const layout = {\n        labelCol: { span: 6 },\n        wrapperCol: { span: 14 }\n    }\n    const rangeConfig = {\n        rules: [\n            {\n                type: 'array',\n                message: 'Please select time!'\n            }\n        ]\n    }\n\n    useEffect(() => {\n        console.log('formdata', formData)\n        if (Object.keys(formData).length) {\n            form.setFieldsValue(formData)\n        } else {\n            form.resetFields()\n        }\n    }, [formData])\n\n    const onGenderChange = value => {\n        form.setFieldsValue({ Gender: value })\n    }\n\n    const onCreateNew = val => {\n        setUser(val)\n        setAllMemVisible(false)\n        form.setFieldsValue({\n            user_id: val.user_id\n        })\n    }\n\n    return (\n        <Modal\n            visible={visible}\n            title='Task module'\n            okText='Submit'\n            cancelText='Cancel'\n            onCancel={onCancel}\n            onOk={() => {\n                form.validateFields()\n                    .then(values => {\n                        form.resetFields()\n                        onCreate(values)\n                    })\n                    .catch(info => {\n                        console.log('Validate Failed:', info)\n                    })\n            }}>\n            <Form {...layout} form={form} name='form_in_modal'>\n                <Form.Item name='module_name' label='Module name' rules={[{ required: true }]}>\n                    <Input />\n                </Form.Item>\n                <Form.Item name='type' label='Type' rules={[{ required: true }]}>\n                    <Select allowClear>\n                        <Option value={1}>promo code</Option>\n                        <Option value={2}>content</Option>\n                        <Option value={3}>proof</Option>\n                        <Option value={6}>Apply Promo Link</Option>\n                    </Select>\n                </Form.Item>\n            </Form>\n        </Modal>\n    )\n}\n\nconst SearchTableView = props => {\n    const [state, setState] = useState({\n        list: [],\n        pagination: {\n            current: 1,\n            pageSize: 10\n        },\n        search: {},\n        loading: true,\n        visible: false,\n        disabled: false,\n        formData: {}\n    })\n    const [handleState, setHandleState] = useState({\n        visible: false,\n        data: {}\n    })\n    useEffect(() => {\n        const { pagination } = state\n        const params = { start_row: 0, page_size: state.pagination.pageSize }\n        getList(params)\n    }, [])\n\n    const refreshList = () => {\n        const params = { start_row: 0, page_size: state.pagination.pageSize }\n        getList(params)\n    }\n\n    const getList = params => {\n        const { pagination, search } = state\n        setState({ ...state, loading: true })\n        APIGetTaskModuleList(params)\n            .then(resp => {\n                setState({\n                    ...state,\n                    visible: false,\n                    list: resp.data.data.records && getKeyList(resp.data.data.records),\n                    loading: false,\n                    search: params.search,\n                    pagination: {\n                        total: resp.data.data.total,\n                        current: params.start_row / params.page_size + 1,\n                        pageSize: params.page_size\n                    }\n                })\n            })\n            .catch(err => {\n                console.log('err', err)\n            })\n    }\n\n    const handleChange = pagination => {\n        console.log('state', state)\n\n        const params = {\n            ...state.search,\n            page_size: pagination.pageSize,\n            start_row: pagination.pageSize * (pagination.current - 1),\n            search: state.search\n        }\n\n        console.log('ttt', params)\n\n        getList(params)\n    }\n\n    const changeSearch = search => {\n        const params = { ...search, page_size: 10, start_row: 0, search: search }\n        setState({\n            ...state,\n            search: search\n        })\n        getList(params)\n    }\n\n    const exportRecord = () => {\n        APIexportRewardRecord()\n            .then(xhr => {\n                return\n            })\n            .catch((err, status, xhr) => { })\n    }\n\n    const onCreate = data => {\n        APICreateTaskModule(data).then(resp => {\n            message.success('success')\n            const params = { ...state.search, start_row: 0, page_size: 10 }\n            getList(params)\n        })\n    }\n\n    const createModule = data => {\n        setState({\n            ...state,\n            visible: true,\n            formData: {}\n        })\n    }\n\n    const edit = data => {\n        console.log('data', data)\n        setState({\n            ...state,\n            visible: true,\n            formData: data\n        })\n    }\n\n    const confirm = data => {\n        console.log('dataconfirm', data)\n        APIDeleteSku({ id: data.id }).then(resp => {\n            const { pagination } = state\n            const params = { start_row: 0, page_size: state.pagination.pageSize }\n            getList(params)\n        })\n    }\n\n    const changeModuleStatus = data => {\n        console.log('yuyu', data.status)\n        if (data.status == 1) {\n            APIDisableModule({ id: data.id }).then(resp => {\n                const params = { start_row: 0, page_size: state.pagination.pageSize }\n                getList(params)\n            })\n        } else {\n            APIEnableModule({ id: data.id }).then(resp => {\n                const params = { start_row: 0, page_size: state.pagination.pageSize }\n                getList(params)\n            })\n        }\n    }\n\n    const changeShow = data => {\n        console.log('data', data)\n        APICreateOrModifySku({\n            categoryJson: JSON.stringify({\n                id: data.id,\n                tier_1_cat: data.tier_1_cat,\n                shown_name: data.shown_name,\n                is_show_app: data.is_show_app == 1 ? 0 : 1\n            })\n        })\n            .then(resp => {\n                const params = {\n                    ...state.search,\n                    page_size: state.pagination.pageSize,\n                    start_row: state.pagination.pageSize * (state.pagination.current - 1),\n                    search: state.search\n                }\n                getList(params)\n            })\n            .catch(err => {\n                console.log('err', err)\n            })\n    }\n\n    const rowSelection = () => { }\n\n    return (\n        <Layout className='animated fadeIn'>\n            <DetailModal\n                visible={state.visible}\n                onCreate={onCreate}\n                onCancel={() => {\n                    setState({ ...state, visible: false })\n                }}\n                formData={state.formData}\n                disabled={state.disabled}\n            />\n            <div className='web-bread-c'>\n                <WebBreadcrumb arr={['Task modules']} />\n                <h3>Task modules</h3>\n                <img src={Aset} className='aset' alt='aset' />\n            </div>\n            <div className='base-wr'>\n                {/* <div className='base-style'>\n                    <SearchBar changeSearch={changeSearch} loading={state.loading} />\n                </div> */}\n                <Row>\n                    <Col span={24}>\n                        <div className='base-style'>\n                            <Row>\n                                <Col span={24} style={{ textAlign: 'right', marginBottom: '15px' }}>\n                                    <Button\n                                        style={{ marginRight: '10px' }}\n                                        type='primary'\n                                        onClick={() => {\n                                            refreshList()\n                                        }}>\n                                        Refresh\n                                    </Button>\n                                    <Button\n                                        type='primary'\n                                        onClick={() => {\n                                            createModule()\n                                        }}>\n                                        Create Task Module\n                                    </Button>\n                                </Col>\n                            </Row>\n                            <Table\n                                columns={columns(edit, changeShow, confirm, changeModuleStatus)}\n                                rowKey={record => record.key}\n                                dataSource={state.list}\n                                onChange={handleChange}\n                                loading={state.loading}\n                                bordered\n                                pagination={state.pagination}\n                                scroll={{ scrollToFirstRowOnChange: true, x: 1000 }}\n                            />\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n        </Layout>\n    )\n}\n\nexport default SearchTableView\n","import TaskModule from './TaskModule.jsx'\nexport default TaskModule\n","\"use strict\";\n\nrequire(\"../../style/index.less\");\n\nrequire(\"./index.less\");","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _rcSwitch = _interopRequireDefault(require(\"rc-switch\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _LoadingOutlined = _interopRequireDefault(require(\"@ant-design/icons/LoadingOutlined\"));\n\nvar _wave = _interopRequireDefault(require(\"../_util/wave\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar _SizeContext = _interopRequireDefault(require(\"../config-provider/SizeContext\"));\n\nvar _devWarning = _interopRequireDefault(require(\"../_util/devWarning\"));\n\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar Switch = /*#__PURE__*/React.forwardRef(function (_a, ref) {\n  var _classNames;\n\n  var customizePrefixCls = _a.prefixCls,\n      customizeSize = _a.size,\n      loading = _a.loading,\n      _a$className = _a.className,\n      className = _a$className === void 0 ? '' : _a$className,\n      disabled = _a.disabled,\n      props = __rest(_a, [\"prefixCls\", \"size\", \"loading\", \"className\", \"disabled\"]);\n\n  (0, _devWarning[\"default\"])('checked' in props || !('value' in props), 'Switch', '`value` is not a valid prop, do you mean `checked`?');\n\n  var _React$useContext = React.useContext(_configProvider.ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var size = React.useContext(_SizeContext[\"default\"]);\n  var prefixCls = getPrefixCls('switch', customizePrefixCls);\n  var loadingIcon = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-handle\")\n  }, loading && /*#__PURE__*/React.createElement(_LoadingOutlined[\"default\"], {\n    className: \"\".concat(prefixCls, \"-loading-icon\")\n  }));\n  var classes = (0, _classnames[\"default\"])((_classNames = {}, (0, _defineProperty2[\"default\"])(_classNames, \"\".concat(prefixCls, \"-small\"), (customizeSize || size) === 'small'), (0, _defineProperty2[\"default\"])(_classNames, \"\".concat(prefixCls, \"-loading\"), loading), (0, _defineProperty2[\"default\"])(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n  return /*#__PURE__*/React.createElement(_wave[\"default\"], {\n    insertExtraNode: true\n  }, /*#__PURE__*/React.createElement(_rcSwitch[\"default\"], (0, _extends2[\"default\"])({}, props, {\n    prefixCls: prefixCls,\n    className: classes,\n    disabled: disabled || loading,\n    ref: ref,\n    loadingIcon: loadingIcon\n  })));\n});\nSwitch.__ANT_SWITCH = true;\nSwitch.displayName = 'Switch';\nvar _default = Switch;\nexports[\"default\"] = _default;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nvar Switch = React.forwardRef(function (_ref, ref) {\n  var _classNames;\n\n  var _ref$prefixCls = _ref.prefixCls,\n      prefixCls = _ref$prefixCls === void 0 ? 'rc-switch' : _ref$prefixCls,\n      className = _ref.className,\n      checked = _ref.checked,\n      defaultChecked = _ref.defaultChecked,\n      disabled = _ref.disabled,\n      loadingIcon = _ref.loadingIcon,\n      checkedChildren = _ref.checkedChildren,\n      unCheckedChildren = _ref.unCheckedChildren,\n      onClick = _ref.onClick,\n      onChange = _ref.onChange,\n      onKeyDown = _ref.onKeyDown,\n      restProps = _objectWithoutProperties(_ref, [\"prefixCls\", \"className\", \"checked\", \"defaultChecked\", \"disabled\", \"loadingIcon\", \"checkedChildren\", \"unCheckedChildren\", \"onClick\", \"onChange\", \"onKeyDown\"]);\n\n  var _useMergedState = useMergedState(false, {\n    value: checked,\n    defaultValue: defaultChecked\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      innerChecked = _useMergedState2[0],\n      setInnerChecked = _useMergedState2[1];\n\n  function triggerChange(newChecked, event) {\n    var mergedChecked = innerChecked;\n\n    if (!disabled) {\n      mergedChecked = newChecked;\n      setInnerChecked(mergedChecked);\n      onChange === null || onChange === void 0 ? void 0 : onChange(mergedChecked, event);\n    }\n\n    return mergedChecked;\n  }\n\n  function onInternalKeyDown(e) {\n    if (e.which === KeyCode.LEFT) {\n      triggerChange(false, e);\n    } else if (e.which === KeyCode.RIGHT) {\n      triggerChange(true, e);\n    }\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(e);\n  }\n\n  function onInternalClick(e) {\n    var ret = triggerChange(!innerChecked, e); // [Legacy] trigger onClick with value\n\n    onClick === null || onClick === void 0 ? void 0 : onClick(ret, e);\n  }\n\n  var switchClassName = classNames(prefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checked\"), innerChecked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames));\n  return React.createElement(\"button\", Object.assign({}, restProps, {\n    type: \"button\",\n    role: \"switch\",\n    \"aria-checked\": innerChecked,\n    disabled: disabled,\n    className: switchClassName,\n    ref: ref,\n    onKeyDown: onInternalKeyDown,\n    onClick: onInternalClick\n  }), loadingIcon, React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-inner\")\n  }, innerChecked ? checkedChildren : unCheckedChildren));\n});\nSwitch.displayName = 'Switch';\nexport default Switch;"],"sourceRoot":""}
(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[61],{1990:function(e,a,t){"use strict";t.r(a);t(58);var n=t(59),l=t.n(n),r=(t(77),t(70)),s=t.n(r),c=(t(56),t(55)),i=t.n(c),o=(t(63),t(66)),m=t.n(o),d=(t(64),t(67)),g=t.n(d),p=(t(74),t(75)),b=t.n(p),u=(t(69),t(72)),E=t.n(u),h=(t(94),t(95)),_=t.n(h),y=(t(83),t(84)),k=t.n(y),v=t(68),O=(t(278),t(282)),w=t.n(O),j=(t(62),t(65)),C=t.n(j),I=(t(79),t(80)),x=t.n(I),f=t(0),S=t.n(f),F=t(76),z=(t(116),t(60)),P=t(103),N=(t(122),t(12),t(281),t(78)),T=t.n(N),D=(t(407),t(2002)),L=t(205);const{MonthPicker:R,RangePicker:A}=x.a,{Option:J}=C.a,q=([{label:"\u5f85\u5904\u7406",value:"to_handle"},{label:"\u5df2\u5904\u7406",value:"handled"}].map((e,a)=>S.a.createElement(J,{key:a,value:e.value},e.label)),(e,a,t,n)=>[{title:"Action",dataIndex:"edit",key:"edit",width:"100",align:"center",render:(a,t)=>S.a.createElement("div",null,S.a.createElement("a",{className:"action-btn",onClick:()=>{e(t)}},S.a.createElement(D.a,null),S.a.createElement("span",{style:{marginLeft:"4px"}},"Edit")))},{title:"Promotion ID",dataIndex:"id",key:"id",align:"center",render:(e,a)=>S.a.createElement("span",{className:"table-id"},e)},{title:"Category",dataIndex:"category",key:"category",align:"center",render:(e,a)=>S.a.createElement(S.a.Fragment,null,1==e?"Top banner":2==e?"abComo selection banner":3==e?"Rewarded task -sigle":4==e?"Rewarded task -dual":"")},{title:"Promotion Title",dataIndex:"title",key:"title",width:"100",align:"center"},{title:"Post start time",dataIndex:"post_start_time",key:"post_start_time",align:"center"},{title:"Post end time",dataIndex:"post_end_time",key:"post_end_time",align:"center"},{title:"Posted by",dataIndex:"operator_name",key:"operator_name",align:"left",render:(e,a)=>S.a.createElement("div",{style:{width:"120px"}},S.a.createElement(L.a,{name:e,style:{display:"inline-block"}}),S.a.createElement("span",null,e))},{title:"status",dataIndex:"status",key:"status",align:"center",render:(e,a)=>S.a.createElement("div",{style:{width:"120px"}},S.a.createElement(w.a,{status:2==e?"success":1==e?"processing":0==e?"error":"default"}),0==e?"Ended":1==e?"Pending to post":2==e?"Posting":"")},{title:"Show to all",dataIndex:"is_whitelist",key:"is_whitelist",align:"center",render:(e,a)=>S.a.createElement(S.a.Fragment,null,0==e?"All users":1==e?"Customize":"")},{title:"Update date",dataIndex:"update_time",key:"update_time",width:"100",align:"center"}]),K={labelCol:{span:8},wrapperCol:{span:16}},V=e=>{const[a]=E.a.useForm();return S.a.createElement(E.a,Object.assign({},K,{form:a,name:"advanced_search",className:"ant-advanced-search-form",onFinish:a=>{console.log("values",a),e.changeSearch(a)}}),S.a.createElement(m.a,{gutter:24},S.a.createElement(g.a,{span:8},S.a.createElement(E.a.Item,{name:"id",label:"ID"},S.a.createElement(b.a,null))),S.a.createElement(g.a,{span:8},S.a.createElement(E.a.Item,{name:"category",label:"Category"},S.a.createElement(C.a,{allowClear:!0},S.a.createElement(J,{value:1},"Top banner"),S.a.createElement(J,{value:2},"abComo selection banner"),S.a.createElement(J,{value:3},"Rewarded task -sigle"),S.a.createElement(J,{value:4},"Rewarded task -dual"),S.a.createElement(J,{value:5},"Feature Product")))),S.a.createElement(g.a,{span:8},S.a.createElement(E.a.Item,{name:"title",label:"Title"},S.a.createElement(b.a,null)))),S.a.createElement(m.a,{gutter:24},S.a.createElement(g.a,{span:8},S.a.createElement(E.a.Item,{name:"link_type",label:"Link type"},S.a.createElement(C.a,{allowClear:!0},S.a.createElement(J,{value:1},"Internal Link"),S.a.createElement(J,{value:2},"External Link"))))),S.a.createElement(m.a,null,S.a.createElement(g.a,{span:24,style:{textAlign:"right"}},S.a.createElement(i.a,{type:"primary",htmlType:"submit",loading:e.loading},"Search"),S.a.createElement(i.a,{style:{margin:"0 8px"},onClick:()=>{a.resetFields()}},"Reset"))))},B=e=>{let{visible:a,onCreate:t,onCancel:n,formData:l,disabled:r}=e;const[s]=E.a.useForm(),[c,i]=Object(f.useState)({}),[o,m]=Object(f.useState)(!1);Object(f.useEffect)(()=>{console.log("formdata",l),Object.keys(l).length?s.setFieldsValue(l):s.resetFields()},[l]);return S.a.createElement(_.a,{visible:a,title:"sku",okText:"Submit",cancelText:"Cancel",onCancel:n,onOk:()=>{s.validateFields().then(e=>{s.resetFields(),t(e)}).catch(e=>{console.log("Validate Failed:",e)})}},S.a.createElement(E.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:s,name:"form_in_modal"}),S.a.createElement(E.a.Item,{name:"id",label:"ID"},S.a.createElement(b.a,{disabled:!0})),S.a.createElement(E.a.Item,{name:"tier_1_cat",label:"Tier1 Cat",rules:[{required:!0}]},S.a.createElement(b.a,null)),S.a.createElement(E.a.Item,{name:"tier_2_cat",label:"Tier2 Cat"},S.a.createElement(b.a,null)),S.a.createElement(E.a.Item,{name:"tier_3_cat",label:"Tier3 Cat"},S.a.createElement(b.a,null)),S.a.createElement(E.a.Item,{name:"shown_name",label:"Sku name",rules:[{required:!0}]},S.a.createElement(b.a,null))))};var M=e=>{const[a,t]=Object(f.useState)({list:[],pagination:{current:1,pageSize:10},search:{},loading:!0,visible:!1,disabled:!1,formData:{}}),[n,r]=Object(f.useState)({visible:!1,data:{}});Object(f.useEffect)(()=>{const{pagination:e}=a,t={start_row:0,page_size:a.pagination.pageSize};c(t)},[]);const c=e=>{const{pagination:n,search:l}=a;console.log("role",e),t(Object(v.a)(Object(v.a)({},a),{},{loading:!0})),Object(z.xb)(JSON.stringify(e)).then(n=>{t(Object(v.a)(Object(v.a)({},a),{},{visible:!1,list:n.data.list&&Object(P.getKeyList)(n.data.list),loading:!1,search:e.search,pagination:{total:n.data.pager.total,current:e.start_row/e.page_size+1,pageSize:e.page_size}}))}).catch(e=>{console.log("err",e)})};return S.a.createElement(l.a,{className:"animated fadeIn"},S.a.createElement(B,{visible:a.visible,onCreate:e=>{console.log("data",e),e.is_show_app=1,Object(z.s)({categoryJson:JSON.stringify(e)}).then(e=>{s.a.success("success");const t=Object(v.a)(Object(v.a)({},a.search),{},{start_row:0,page_size:10});c(t)}).catch(e=>{console.log("err",e)})},onCancel:()=>{t(Object(v.a)(Object(v.a)({},a),{},{visible:!1}))},formData:a.formData,disabled:a.disabled}),S.a.createElement("div",{className:"web-bread-c"},S.a.createElement(F.a,{arr:["Promotions  List"]}),S.a.createElement("h3",null,"Promotions List"),S.a.createElement("img",{src:T.a,className:"aset",alt:"aset"})),S.a.createElement("div",{className:"base-wr"},S.a.createElement("div",{className:"base-style"},S.a.createElement(V,{changeSearch:e=>{const n=Object(v.a)(Object(v.a)({},e),{},{page_size:10,start_row:0,search:e});t(Object(v.a)(Object(v.a)({},a),{},{search:e})),c(n)},loading:a.loading})),S.a.createElement(m.a,null,S.a.createElement(g.a,{span:24},S.a.createElement("div",{className:"base-style"},S.a.createElement(m.a,null,S.a.createElement(g.a,{span:24,style:{textAlign:"right",marginBottom:"15px"}},S.a.createElement(i.a,{type:"primary",onClick:()=>{e.history.push("/mobile_app_management/promotion_detail/0")}},"Add promotion"))),S.a.createElement(k.a,{columns:q(a=>{console.log("data",a),e.history.push("/mobile_app_management/promotion_detail/"+a.id)}),rowKey:e=>e.key,dataSource:a.list,onChange:e=>{console.log("state",a);const t=Object(v.a)(Object(v.a)({},a.search),{},{page_size:e.pageSize,start_row:e.pageSize*(e.current-1),search:a.search});console.log("ttt",t),c(t)},loading:a.loading,bordered:!0,rowSelection:Object(v.a)({type:"checkbox"},()=>{}),pagination:a.pagination,scroll:{scrollToFirstRowOnChange:!0,x:1e3}}))))))};a.default=M}}]);
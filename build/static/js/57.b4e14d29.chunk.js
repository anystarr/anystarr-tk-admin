(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[57],{1996:function(e,a,t){"use strict";t.r(a);t(58);var l=t(59),n=t.n(l),c=(t(83),t(84)),s=t.n(c),r=(t(77),t(70)),i=t.n(r),o=t(68),m=(t(94),t(95)),d=t.n(m),b=(t(56),t(55)),g=t.n(b),u=(t(63),t(66)),E=t.n(u),p=(t(64),t(67)),f=t.n(p),O=(t(74),t(75)),h=t.n(O),j=(t(69),t(72)),C=t.n(j),v=(t(62),t(65)),_=t.n(v),y=(t(79),t(80)),w=t.n(y),k=t(0),D=t.n(k),S=t(76),F=(t(116),t(60)),I=t(103),x=(t(130),t(78)),Y=t.n(x),R=t(516),N=(t(205),t(135)),T=t.n(N);const{MonthPicker:M,RangePicker:z}=w.a,{Option:V}=_.a,H={rules:[{type:"object",required:!0,message:"Please select time!"}]},J=([{label:"\u5f85\u5904\u7406",value:"to_handle"},{label:"\u5df2\u5904\u7406",value:"handled"}].map((e,a)=>D.a.createElement(V,{key:a,value:e.value},e.label)),e=>[{title:"Referral Code ID",dataIndex:"id",key:"id",align:"center",render:(a,t)=>D.a.createElement("span",{className:"table-id pointer",onClick:()=>{e(t.user_id)}},a)},{title:"Referral Code",dataIndex:"code",key:"code",align:"center"},{title:"Email",dataIndex:"email",key:"email",align:"center"},{title:"Created time",dataIndex:"create_time",key:"create_time",align:"center"}]),L={labelCol:{span:8},wrapperCol:{span:16}},P=e=>{const[a]=C.a.useForm();return D.a.createElement(C.a,Object.assign({},L,{form:a,name:"advanced_search",className:"ant-advanced-search-form",onFinish:a=>{e.changeSearch(a)}}),D.a.createElement(E.a,{gutter:24},D.a.createElement(f.a,{span:8},D.a.createElement(C.a.Item,{name:"user_id",label:"User ID"},D.a.createElement(h.a,null))),D.a.createElement(f.a,{span:8},D.a.createElement(C.a.Item,{name:"Code",label:"Code"},D.a.createElement(h.a,null))),D.a.createElement(f.a,{span:8},D.a.createElement(C.a.Item,{name:"email",label:"Email"},D.a.createElement(h.a,null)))),D.a.createElement(E.a,null,D.a.createElement(f.a,{span:24,style:{textAlign:"right"}},D.a.createElement(g.a,{icon:D.a.createElement(R.a,null),type:"primary",htmlType:"submit",loading:e.loading},"Search"),D.a.createElement(g.a,{style:{margin:"0 8px"},onClick:()=>{a.resetFields()}},"Reset"))))},U=e=>{let{visible:a,onCreate:t,onCancel:l,formData:n,disabled:c}=e;const[s]=C.a.useForm();return D.a.createElement(d.a,{visible:a,title:"download ",okText:"Submit",cancelText:"Cancel",onCancel:l,onOk:()=>{s.validateFields().then(e=>{s.resetFields(),t(e)}).catch(e=>{console.log("Validate Failed:",e)})}},D.a.createElement(C.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:s,name:"form_in_modal"}),D.a.createElement(C.a.Item,{label:"User Name",name:"user_name"},D.a.createElement(h.a,null)),D.a.createElement(C.a.Item,{label:"Type",name:"type"},D.a.createElement(_.a,null,D.a.createElement(V,{value:1},"Email"),D.a.createElement(V,{value:2},"Ins"),D.a.createElement(V,{value:3},"facebook"))),D.a.createElement(C.a.Item,Object.assign({name:"begin_date",label:"Begin Time"},H),D.a.createElement(w.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})),D.a.createElement(C.a.Item,Object.assign({name:"end_date",label:"End Time"},H),D.a.createElement(w.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))))},A=e=>{let{visible:a,onCreate:t,onCancel:l,formData:n,disabled:c}=e;const[s]=C.a.useForm(),[r,i]=Object(k.useState)({}),[o,m]=Object(k.useState)(!1);Object(k.useEffect)(()=>{Object.keys(n).length?s.setFieldsValue(n):s.resetFields()},[]);return D.a.createElement(d.a,{visible:a,title:"Generate Referral code",okText:"Submit",cancelText:"Cancel",onCancel:l,onOk:()=>{s.validateFields().then(e=>{s.resetFields(),t(e)}).catch(e=>{console.log("Validate Failed:",e)})}},D.a.createElement(C.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:s,name:"form_in_modal"}),D.a.createElement(C.a.Item,{name:"type",label:"Type"},D.a.createElement(_.a,null,D.a.createElement(V,{value:"email"},"email"),D.a.createElement(V,{value:"ins"},"ins"),D.a.createElement(V,{value:"fb"},"fb"))),D.a.createElement(C.a.Item,{name:"user_name",label:"User Name",rules:[{required:!0}]},D.a.createElement(h.a,null))))};var B=()=>{const[e,a]=Object(k.useState)({list:[],pagination:{current:1,pageSize:10},search:{},loading:!0,visible:!1,disabled:!1,formData:{},aVisible:!1,aFormData:{},bVisible:!1,bFormData:{},dVisible:!1,dFormData:{}}),[t,l]=Object(k.useState)({visible:!1,data:{}});Object(k.useEffect)(()=>{const{pagination:a}=e,t={start_row:0,page_size:e.pagination.pageSize};c(t)},[]);const c=t=>{console.log("params",t);const{pagination:l,search:n}=e;a(Object(o.a)(Object(o.a)({},e),{},{loading:!0})),Object(F.Ab)(t).then(t=>{a(Object(o.a)(Object(o.a)({},e),{},{visible:!1,list:t.data.list&&Object(I.getKeyList)(t.data.list),loading:!1,pagination:{total:t.data.pager.total}}))}).catch(e=>{console.log("err",e)})},r={onChange:(e,a)=>{console.log("selectedRowKeys: ".concat(e),"selectedRows: ",a)},getCheckboxProps:e=>({disabled:"Disabled User"===e.name,name:e.name})};return D.a.createElement(n.a,{className:"animated fadeIn"},D.a.createElement(U,{visible:e.dVisible,onCreate:t=>{console.log("values",t);let l=Object(o.a)(Object(o.a)({},t),{},{begin_date:t.begin_date.format("YYYY-MM-DD HH:mm:ss"),end_date:t.end_date.format("YYYY-MM-DD HH:mm:ss")});Object(F.J)({Referral_code_json:JSON.stringify(l)}).then(t=>{i.a.success("success"),a(Object(o.a)(Object(o.a)({},e),{},{dVisible:!1}))})},onCancel:()=>{a(Object(o.a)(Object(o.a)({},e),{},{dVisible:!1}))},formData:e.formData}),D.a.createElement(A,{visible:e.visible,onCreate:a=>{console.log("data",a),Object(F.j)({ReferralCodeJson:JSON.stringify(a)}).then(a=>{i.a.success("success");const t=Object(o.a)({},e.search);c(t)}).catch(e=>{console.log("err",e)})},onCancel:()=>{a(Object(o.a)(Object(o.a)({},e),{},{visible:!1}))},formData:e.formData,disabled:e.disabled}),D.a.createElement("div",{className:"web-bread-c"},D.a.createElement(S.a,{arr:["Referral Code List"]}),D.a.createElement("h3",null,"Referral Code List"),D.a.createElement("img",{src:Y.a,className:"aset"})),D.a.createElement("div",{className:"base-wr"},D.a.createElement("div",{className:"base-style"},D.a.createElement(P,{changeSearch:t=>{const l=Object(o.a)(Object(o.a)({},t),{},{page_size:e.pagination.pageSize,start_row:0});a(Object(o.a)(Object(o.a)({},e),t)),c(l)},loading:e.loading})),D.a.createElement(E.a,null,D.a.createElement(f.a,{span:24},D.a.createElement("div",{className:"base-style"},D.a.createElement(E.a,null,D.a.createElement(f.a,{span:24,style:{textAlign:"right",marginBottom:"15px"}})),D.a.createElement(s.a,{columns:J(e=>{console.log("edit",e);let a=T.a+"/account/referral_user?user_id="+e;window.open(a,"_blank").focus()}),bordered:!0,rowKey:e=>e.key,rowSelection:Object(o.a)({type:"checkbox"},r),scroll:{scrollToFirstRowOnChange:!0,x:1e3},dataSource:e.list,onChange:a=>{const t=Object(o.a)(Object(o.a)({},e.search),{},{page_size:a.pageSize,start_row:a.pageSize*(a.current-1)});c(t)},loading:e.loading,pagination:e.pagination}))))))};a.default=B},516:function(e,a,t){"use strict";var l=t(39),n=t(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},s=t(54),r=function(e,a){return n.createElement(s.a,Object(l.a)(Object(l.a)({},e),{},{ref:a,icon:c}))},i=n.forwardRef(r);a.a=i}}]);
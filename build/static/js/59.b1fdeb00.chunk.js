(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[59],{1975:function(e,a,t){"use strict";t.r(a);t(58);var l=t(59),n=t.n(l),c=(t(83),t(84)),r=t.n(c),s=(t(77),t(70)),i=t.n(s),m=t(68),o=(t(94),t(95)),p=t.n(o),d=(t(56),t(55)),g=t.n(d),b=(t(63),t(66)),E=t.n(b),u=(t(64),t(67)),h=t.n(u),y=(t(74),t(75)),x=t.n(y),O=(t(69),t(72)),f=t.n(O),j=(t(62),t(65)),v=t.n(j),w=(t(79),t(80)),S=t.n(w),N=t(0),k=t.n(N),F=t(76),z=(t(116),t(60)),C=t(103),T=(t(12),t(78)),R=t.n(T),_=t(2003);const{MonthPicker:I,RangePicker:A}=S.a,{Option:D}=v.a,P=([{label:"\u5f85\u5904\u7406",value:"to_handle"},{label:"\u5df2\u5904\u7406",value:"handled"}].map((e,a)=>k.a.createElement(D,{key:a,value:e.value},e.label)),(e,a,t,l)=>[{title:"Action",dataIndex:"edit",key:"edit",width:"100",align:"center",render:(a,t)=>k.a.createElement("div",null,k.a.createElement("a",{className:"action-btn",onClick:()=>{e(t)}},"Edit"))},{title:"ID",dataIndex:"id",key:"id",width:"100",align:"center",render:(e,a)=>k.a.createElement("span",{className:"table-id"},e)},{title:"Type",dataIndex:"type",key:"type",align:"center",width:"160",render:(e,a)=>1==e?k.a.createElement("span",{className:"table-row-p"},k.a.createElement(_.a,{style:{color:"#868AF6",fontSize:"13px",marginRight:"3px"}}),"Verification code email"):2==e?k.a.createElement("span",{className:"table-row-green"},k.a.createElement(_.a,{style:{color:"#18BFA4",fontSize:"13px",marginRight:"3px"}}),"welcome email"):3==e?k.a.createElement("span",{className:"table-row-red"},k.a.createElement(_.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"activation email"):4==e?k.a.createElement("span",{className:"table-row-red"},k.a.createElement(_.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"Customer service reply email"):k.a.createElement("span",{className:"table-row-green"},k.a.createElement(_.a,{style:{color:"#18BFA4",fontSize:"13px",marginRight:"3px"}}),l[e])},{title:"Language",dataIndex:"language",key:"language",align:"center",render:(e,a)=>1==e?k.a.createElement("span",{className:"table-row-p"},k.a.createElement(_.a,{style:{color:"#868AF6",fontSize:"13px",marginRight:"3px"}}),"English"):2==e?k.a.createElement("span",{className:"table-row-green"},k.a.createElement(_.a,{style:{color:"#18BFA4",fontSize:"13px",marginRight:"3px"}}),"French"):3==e?k.a.createElement("span",{className:"table-row-red"},k.a.createElement(_.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"Spanish"):4==e?k.a.createElement("span",{className:"table-row-red"},k.a.createElement(_.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"Polish"):5==e?k.a.createElement("span",{className:"table-row-p"},k.a.createElement(_.a,{style:{color:"#868AF6",fontSize:"13px",marginRight:"3px"}}),"Portuguese"):null},{title:"Title",dataIndex:"title",key:"title",align:"center"}]),B={labelCol:{span:8},wrapperCol:{span:16}},J=e=>{const[a]=f.a.useForm();return k.a.createElement(f.a,Object.assign({},B,{form:a,name:"advanced_search",className:"ant-advanced-search-form",onFinish:a=>{e.changeSearch(a)}}),k.a.createElement(E.a,{gutter:24},k.a.createElement(h.a,{span:8},k.a.createElement(f.a.Item,{name:"id",label:" ID"},k.a.createElement(x.a,null))),k.a.createElement(h.a,{span:8},k.a.createElement(f.a.Item,{name:"type",label:"Type"},k.a.createElement(v.a,null,Object.keys(e.temType)&&Object.keys(e.temType).map((a,t)=>k.a.createElement(D,{value:a},e.temType[a]))))),k.a.createElement(h.a,{span:8},k.a.createElement(f.a.Item,{name:"language",label:"Language"},k.a.createElement(v.a,null,k.a.createElement(D,{value:1},"English"),k.a.createElement(D,{value:2},"French"),k.a.createElement(D,{value:3},"Spanish"),k.a.createElement(D,{value:4},"Polish"),k.a.createElement(D,{value:5},"Portuguese"))))),k.a.createElement(E.a,null,k.a.createElement(h.a,{span:24,style:{textAlign:"right"}},k.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Search"),k.a.createElement(g.a,{style:{margin:"0 8px"},onClick:()=>{a.resetFields()}},"Reset"))))},L=e=>{let{visible:a,onCreate:t,onCancel:l,formData:n,disabled:c}=e;const[r]=f.a.useForm(),[s,i]=Object(N.useState)({}),[m,o]=Object(N.useState)(!1);Object(N.useEffect)(()=>{Object.keys(n).length?r.setFieldsValue(n):r.resetFields()},[]);return k.a.createElement(p.a,{visible:a,title:"\u521b\u5efa\u9080\u8bf7\u7801",okText:"Submit",cancelText:"Cancel",onCancel:l,onOk:()=>{r.validateFields().then(e=>{r.resetFields(),t(e)}).catch(e=>{console.log("Validate Failed:",e)})}},k.a.createElement(f.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:r,name:"form_in_modal"}),k.a.createElement(f.a.Item,{name:"email",label:"email",rules:[{required:!0}]},k.a.createElement(x.a,null))))};var V=e=>{const[a,t]=Object(N.useState)({list:[],pagination:{current:1,pageSize:20},search:{},loading:!0,visible:!1,disabled:!1,formData:{}}),[l,c]=Object(N.useState)({visible:!1,data:{}}),[s,o]=Object(N.useState)({});Object(N.useEffect)(()=>{const{pagination:e}=a;Object(z.Ob)().then(e=>{o(e.data.messageTypes),console.log(e.data.messageTypes)});const t={start_row:0,page_size:a.pagination.pageSize};p(t)},[]);const p=e=>{const{pagination:l,search:n}=a;t(Object(m.a)(Object(m.a)({},a),{},{loading:!0})),Object(z.hb)(JSON.stringify(e)).then(e=>{t(Object(m.a)(Object(m.a)({},a),{},{visible:!1,list:e.data.list&&Object(C.getKeyList)(e.data.list),loading:!1,pagination:{total:e.data.pager.total}}))}).catch(e=>{console.log("err",e)})};return k.a.createElement(n.a,{className:"animated fadeIn"},k.a.createElement(L,{visible:a.visible,onCreate:e=>{console.log("data",e),Object(z.j)(e).then(e=>{i.a.success("success");const t=Object(m.a)({},a.search);p(t)}).catch(e=>{console.log("err",e)})},onCancel:()=>{t(Object(m.a)(Object(m.a)({},a),{},{visible:!1}))},formData:a.formData,disabled:a.disabled}),k.a.createElement("div",{className:"web-bread-c"},k.a.createElement(F.a,{arr:["Email Template"]}),k.a.createElement("h3",null,"Email Template"),k.a.createElement("img",{src:R.a,className:"aset",alt:"aset"})),k.a.createElement("div",{className:"base-wr"},k.a.createElement("div",{className:"base-style"},k.a.createElement(J,{changeSearch:e=>{const l=Object(m.a)(Object(m.a)({},e),{},{page_size:10,start_row:0});p(l),t(Object(m.a)(Object(m.a)({},a),e))},temType:s})),k.a.createElement(E.a,null,k.a.createElement(h.a,{span:24},k.a.createElement("div",{className:"base-style"},k.a.createElement(E.a,null,k.a.createElement(h.a,{span:24,style:{textAlign:"right",marginBottom:"15px"}},k.a.createElement(g.a,{type:"primary",onClick:()=>{e.history.push("/email_tem_detail/0")}},"New Email Tempalte"))),k.a.createElement(r.a,{columns:P(a=>{e.history.push("/email_tem_detail/"+a.id)},0,0,s),rowKey:e=>e.key,dataSource:a.list,onChange:e=>{const t=Object(m.a)(Object(m.a)({},a.search),{},{page_size:e.pageSize,start_row:e.pageSize*(e.current-1)});p(t)},loading:a.loading,expandable:{expandedRowRender:e=>k.a.createElement("p",{style:{margin:0}},e.content),rowExpandable:e=>"Not Expandable"!==e.name},bordered:!0,rowSelection:Object(m.a)({type:"checkbox"},()=>{}),pagination:a.pagination,scroll:{scrollToFirstRowOnChange:!0,x:1e3}}))))))};a.default=V}}]);
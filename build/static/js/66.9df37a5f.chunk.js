(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[66],{1983:function(e,a,t){"use strict";t.r(a);t(58);var n=t(59),l=t.n(n),s=(t(83),t(84)),c=t.n(s),r=(t(77),t(70)),i=t.n(r),o=t(68),m=(t(94),t(95)),d=t.n(m),g=(t(56),t(55)),p=t.n(g),b=(t(63),t(66)),u=t.n(b),h=(t(64),t(67)),E=t.n(h),y=(t(74),t(75)),O=t.n(y),_=(t(69),t(72)),k=t.n(_),j=(t(297),t(299)),C=t.n(j),S=(t(182),t(186)),f=t.n(S),v=(t(62),t(65)),w=t.n(v),x=(t(79),t(80)),I=t.n(x),N=t(0),z=t.n(N),F=t(76),D=(t(116),t(60)),J=t(103),T=(t(122),t(12),t(281),t(78)),A=t.n(T),R=t(2002),U=t(319),L=t(205);const{MonthPicker:V,RangePicker:q}=I.a,{Option:K}=w.a,M=([{label:"\u5f85\u5904\u7406",value:"to_handle"},{label:"\u5df2\u5904\u7406",value:"handled"}].map((e,a)=>z.a.createElement(K,{key:a,value:e.value},e.label)),(e,a,t,n)=>[{title:"Action",dataIndex:"edit",key:"edit",width:"100",align:"center",render:(a,n)=>z.a.createElement("div",null,z.a.createElement("a",{className:"action-btn",onClick:()=>{e(n)}},z.a.createElement(R.a,{style:{marginRight:"4px"}}),"Edit"),z.a.createElement(f.a,{title:"Are you sure delete this account?",onConfirm:()=>{t(n)},okText:"Yes",cancelText:"No"},z.a.createElement("a",{className:"action-btn",onClick:()=>{}},z.a.createElement(U.a,{style:{marginRight:"4px"}}),"Delete")))},{title:"Name",dataIndex:"nickname",key:"nickname",width:"100",align:"left",render:(e,a)=>z.a.createElement("div",{style:{minWidth:"120px"}},z.a.createElement(L.a,{name:e,style:{display:"inline-block"}}),z.a.createElement("span",null,e))},{title:"Email",dataIndex:"email",key:"email",align:"center"},{title:"status",dataIndex:"status",key:"status",align:"center",render:(e,a)=>z.a.createElement(C.a,{onChange:()=>{n(a)},checkedChildren:"NORMAL",unCheckedChildren:"INVALID",defaultChecked:1==e})},{title:"Role",dataIndex:"role",key:"role",align:"center",render:(e,a)=>z.a.createElement(z.a.Fragment,null,e&&JSON.parse(e).map((e,a)=>z.a.createElement("span",{className:"tag-color-".concat(a+1)},e.toUpperCase())))},{title:"Update date",dataIndex:"update_time",key:"update_time",width:"100",align:"center"}]),P={labelCol:{span:8},wrapperCol:{span:16}},B=e=>{const[a]=k.a.useForm();return z.a.createElement(k.a,Object.assign({},P,{form:a,name:"advanced_search",className:"ant-advanced-search-form",onFinish:a=>{console.log("values",a),e.changeSearch(a)}}),z.a.createElement(u.a,{gutter:24},z.a.createElement(E.a,{span:8},z.a.createElement(k.a.Item,{name:"id",label:"ID"},z.a.createElement(O.a,null))),z.a.createElement(E.a,{span:8},z.a.createElement(k.a.Item,{name:"nickname",label:"name"},z.a.createElement(O.a,null))),z.a.createElement(E.a,{span:8},z.a.createElement(k.a.Item,{name:"email",label:"Email"},z.a.createElement(O.a,null)))),z.a.createElement(u.a,null,z.a.createElement(E.a,{span:24,style:{textAlign:"right"}},z.a.createElement(p.a,{type:"primary",htmlType:"submit",loading:e.loading},"Search"),z.a.createElement(p.a,{style:{margin:"0 8px"},onClick:()=>{a.resetFields()}},"Reset"))))},W=e=>{let{visible:a,onCreate:t,onCancel:n,formData:l,disabled:s}=e;const[c]=k.a.useForm(),[r,i]=Object(N.useState)({}),[o,m]=Object(N.useState)(!1);Object(N.useEffect)(()=>{console.log("formdata",l),Object.keys(l).length?c.setFieldsValue(l):c.resetFields()},[l]);return z.a.createElement(d.a,{visible:a,title:"sku",okText:"Submit",cancelText:"Cancel",onCancel:n,onOk:()=>{c.validateFields().then(e=>{c.resetFields(),t(e)}).catch(e=>{console.log("Validate Failed:",e)})}},z.a.createElement(k.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:c,name:"form_in_modal"}),z.a.createElement(k.a.Item,{name:"id",label:"ID"},z.a.createElement(O.a,{disabled:!0})),z.a.createElement(k.a.Item,{name:"tier_1_cat",label:"Tier1 Cat",rules:[{required:!0}]},z.a.createElement(O.a,null)),z.a.createElement(k.a.Item,{name:"tier_2_cat",label:"Tier2 Cat"},z.a.createElement(O.a,null)),z.a.createElement(k.a.Item,{name:"tier_3_cat",label:"Tier3 Cat"},z.a.createElement(O.a,null)),z.a.createElement(k.a.Item,{name:"shown_name",label:"Sku name",rules:[{required:!0}]},z.a.createElement(O.a,null))))};var Y=e=>{const[a,t]=Object(N.useState)({list:[],pagination:{current:1,pageSize:10},search:{},loading:!0,visible:!1,disabled:!1,formData:{}}),[n,s]=Object(N.useState)({visible:!1,data:{}});Object(N.useEffect)(()=>{const{pagination:e}=a,t={start_row:0,page_size:a.pagination.pageSize};r(t)},[]);const r=e=>{const{pagination:n,search:l}=a;t(Object(o.a)(Object(o.a)({},a),{},{loading:!0})),Object(D.fb)({crmUserJson:JSON.stringify(e)}).then(n=>{t(Object(o.a)(Object(o.a)({},a),{},{visible:!1,list:n.data.list&&Object(J.getKeyList)(n.data.list),loading:!1,search:e.search,pagination:{total:n.data.pager.total,current:e.start_row/e.page_size+1,pageSize:e.page_size}}))}).catch(e=>{console.log("err",e)})};return z.a.createElement(l.a,{className:"animated fadeIn"},z.a.createElement(W,{visible:a.visible,onCreate:e=>{console.log("data",e),e.is_show_app=1,Object(D.s)({categoryJson:JSON.stringify(e)}).then(e=>{i.a.success("success");const t=Object(o.a)(Object(o.a)({},a.search),{},{start_row:0,page_size:10});r(t)}).catch(e=>{console.log("err",e)})},onCancel:()=>{t(Object(o.a)(Object(o.a)({},a),{},{visible:!1}))},formData:a.formData,disabled:a.disabled}),z.a.createElement("div",{className:"web-bread-c"},z.a.createElement(F.a,{arr:["System User  List"]}),z.a.createElement("h3",null,"System User List"),z.a.createElement("img",{src:A.a,className:"aset",alt:"aset"})),z.a.createElement("div",{className:"base-wr"},z.a.createElement("div",{className:"base-style"},z.a.createElement(B,{changeSearch:e=>{const n=Object(o.a)(Object(o.a)({},e),{},{page_size:10,start_row:0,search:e});t(Object(o.a)(Object(o.a)({},a),{},{search:e})),r(n)},loading:a.loading})),z.a.createElement(u.a,null,z.a.createElement(E.a,{span:24},z.a.createElement("div",{className:"base-style"},z.a.createElement(u.a,null,z.a.createElement(E.a,{span:24,style:{textAlign:"right",marginBottom:"15px"}},z.a.createElement(p.a,{type:"primary",onClick:()=>{e.history.push("/permissions/add_system_user/0")}},"+ Add System User"))),z.a.createElement(c.a,{columns:M(a=>{console.log("data",a),e.history.push("/permissions/add_system_user/"+a.id)},0,e=>{console.log("dataconfirm",e),Object(D.D)({id:e.id}).then(e=>{const{pagination:t}=a,n={start_row:0,page_size:a.pagination.pageSize};r(n)})},e=>{console.log("onChangeStatus",e),Object(D.ec)({crmUserJson:JSON.stringify({id:e.id,status:1==e.status?0:1})}).then(e=>{}).catch(e=>{console.log("err",e)})}),rowKey:e=>e.key,dataSource:a.list,onChange:e=>{console.log("state",a);const t=Object(o.a)(Object(o.a)({},a.search),{},{page_size:e.pageSize,start_row:e.pageSize*(e.current-1),search:a.search});console.log("ttt",t),r(t)},loading:a.loading,bordered:!0,rowSelection:Object(o.a)({type:"checkbox"},()=>{}),pagination:a.pagination,scroll:{scrollToFirstRowOnChange:!0,x:1e3}}))))))};a.default=Y}}]);